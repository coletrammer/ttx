<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.13.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ttx: Building</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
 <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
    <!-- ... other metadata & script includes ... -->
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript">
      DoxygenAwesomeDarkModeToggle.init();
    </script>
    <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init();
    </script>
    <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript">
      DoxygenAwesomeParagraphLink.init();
    </script>
  </head>
  <body>
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">
                    ttx<span id="projectnumber">&#160;0.1.0</span
                    >
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_docs_2pages_2build.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Building</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md10"></a></p>
<p>This package can be built either directly through <a href="https://cmake.org/">CMake</a> or using <a href="https://nixos.org/">nix</a>.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Building with CMake</h1>
<h2><a class="anchor" id="autotoc_md12"></a>
Prerequisites</h2>
<ul>
<li>Install CMake version 3.21 or later.</li>
<li>Install either GCC 14+ or Clang 19+.</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Dependencies</h2>
<ul>
<li>The <a href="https://github.com/junegunn/fzf">fzf</a> program. This is used at runtime for various menus. To be clear, this dependency is only needed for the <code>ttx</code> application and not the terminal emulation library itself.</li>
<li>The <a href="https://github.com/coletrammer/dius">dius</a> library.</li>
<li>The <a href="https://github.com/coletrammer/di">di</a> library (dependency of dius).</li>
</ul>
<p>The dius library will be found using CMake <code>find_package</code> unless the source is available at the path specified by <code>ttx_dius_DIRECTORY</code>. By default, that CMake variable is set <code>./dius</code>. When using nix, the library's flake is included automatically.</p>
<p>The recommended setup for building ttx from source involves the following shell commands.</p>
<div class="fragment"><div class="line"># Clone all repositories</div>
<div class="line">git clone https://github.com/coletrammer/di</div>
<div class="line">git clone https://github.com/coletrammer/dius</div>
<div class="line">git clone https://github.com/coletrammer/ttx</div>
<div class="line"> </div>
<div class="line"># Setup dependencies</div>
<div class="line">ln -s &quot;$(realpath ./di)&quot; ./dius/di</div>
<div class="line">ln -s &quot;$(realpath ./dius)&quot; ./ttx/dius</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
Manual Build Commands</h2>
<p>To manually build ttx and its library, use the following commands.</p>
<div class="fragment"><div class="line">cmake -S . -B build -D CMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build build</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
Install Commands</h2>
<div class="fragment"><div class="line">cmake --install build</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
Consuming the ttx Library via CMake</h2>
<p>This project exports a CMake package to be used with the <a href="https://cmake.org/cmake/help/latest/command/find_package.html"><code>find_package</code></a> command of CMake:</p>
<ul>
<li>Package name: <code>ttx</code></li>
<li>Target name: <code>ttx::ttx</code></li>
</ul>
<p>In general, you can either include <code>find_package(ttx REQUIRED)</code> somewhere in your CMake build or call <code>add_subdirectory</code> on the ttx source code. When using <code>find_package</code>, it probably makes sense to use fetch content to download the library during the build. When using <code>add_subdirectory</code>, this project can be included as a git submodule. Because CMake is CMake, there's several other ways to make things work, and this library tries to be as flexible as possible so that both of the above methods will succeed.</p>
<p>Afterwards, use the library via <code>target_link_libraries(target PRIVATE ttx::ttx)</code>.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Note to packagers</h2>
<p>Any <code>ttx</code> package should depend on <code>fzf</code> as <code>ttx</code> requires the <code>fzf</code> program to be in the user's PATH on application startup.</p>
<p>The <code>CMAKE_INSTALL_INCLUDEDIR</code> is set to a path other than just <code>include</code> if the project is configured as a top level project to avoid indirectly including other libraries when installed to a common prefix. Please review the <a href="cmake/install-rules.cmake">install-rules.cmake</a> file for the full set of install rules.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Building with nix</h1>
<h2><a class="anchor" id="autotoc_md19"></a>
Prerequisites</h2>
<ul>
<li>Install <a href="https://nixos.org/download/">nix</a>.</li>
<li>Enable the following <a href="https://nix.dev/manual/nix/latest/development/experimental-features">experimental features</a>:<ul>
<li>nix-command</li>
<li>flakes</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
Consuming via Flake</h2>
<p>This section assumes you are interested in the ttx library. See [./install.md] for instructions on installing the ttx application using nix.</p>
<p>To consume the library in your flake, add ttx as an input:</p>
<div class="fragment"><div class="line">ttx = {</div>
<div class="line">  url = &quot;github.com/coletrammer/ttx&quot;;</div>
<div class="line">  inputs.nixpkgs.follows = &quot;nixpkgs&quot;;</div>
<div class="line">};</div>
</div><!-- fragment --><p>Then include <code>inputs.ttx.packages.${system}.ttx-lib</code> in the <code>buildInputs</code> of your derivation. Assuming your project is using CMake, <code>find_package(ttx)</code> will succeed automatically.</p>
<p>This flake provides takes the di and dius libraries as a flake input, so it can be overridden easily. The <code>fzf</code> dependency is taken from nixpkgs (which is also easy to override), and the <code>ttx</code> binary is wrapped by nix to ensure <code>fzf</code> will be in the <code>PATH</code> variable when running <code>ttx</code>.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Manual Build Commands</h2>
<p>Alternatively, use the <code>nix</code> command to build the library manually.</p>
<div class="fragment"><div class="line">nix build .#ttx-lib</div>
</div><!-- fragment --><p>This outputs the result to <code>./result</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
